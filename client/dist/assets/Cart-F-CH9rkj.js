import{r as d,a as P,j as t,R as y,u as Q}from"./index-Bjvdj6dT.js";import{Q as T,B as g,N as R,F as q}from"./Nav-Ndcotqtg.js";import{B as x}from"./Button-CNhTKzbO.js";import{f as N,c as v,r as E,m as _,b as A}from"./CartsApi-CywupJHI.js";const S=({name:l,price:a,imgURLs:o,quantity:c,productId:n})=>{if(!l||!a||!o||o.length===0||!c)return null;const i=o[0],{getAllProductsFromCart:r}=N(),[s,m]=d.useState(c),[u,f]=P(v),h=e=>{g.success(e)},j=e=>{g.error(e)};d.useEffect(()=>{m(c)},[c]);const p=async e=>{try{await _(n,e),r(),m(e);const b=u+(e-s)*a;f(b),h("Quantity updated!")}catch{j("Could not update quanity!")}},C=()=>{if(s>1){const e=s-1;p(e)}},k=()=>{const e=s+1;p(e)},w=async()=>{try{await E(n),r();const e=u-a*s;f(e),h("Product removed from cart!")}catch{j("Could not remove from cart")}},F=parseFloat(a)*s;return t.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between border-b border-gray-300 py-4",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-4 sm:mb-0 w-full sm:w-auto",children:[t.jsx("img",{src:i,alt:l,className:"w-16 h-16 object-cover rounded-md"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-lg font-semibold",children:l}),t.jsxs("p",{className:"text-gray-500",children:["Price: ₹",a]}),t.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[t.jsx("p",{className:"text-gray-500",children:"Quantity: "}),t.jsx("button",{className:"border border-gray-300 h-6 w-6 flex items-center justify-center bg-gray-100 text-black",onClick:C,children:"-"}),t.jsx("p",{className:"text-gray-500",children:s}),t.jsx("button",{className:"border border-gray-300 h-6 w-6 flex items-center justify-center bg-gray-100 text-black",onClick:k,children:"+"})]}),t.jsx("div",{className:"lg:mt-2 sm:mt-0",children:t.jsx(x,{square:!0,label:"Remove",onClick:w})})]})]}),t.jsx("div",{children:t.jsxs("p",{className:"text-lg font-semibold",children:["₹",F.toFixed(2)]})}),t.jsx(T,{})]})};function V(){const{getAllProductsFromCart:l}=N();d.useEffect(()=>{l()},[]);const a=y(A),o=y(v),c=Array.isArray(a)?a:[],n=c.length===0,i=Q();return t.jsxs("div",{children:[t.jsx(R,{}),t.jsx("div",{className:"py-20 pt-40",children:n?t.jsxs("div",{className:"flex justify-center items-center h-screen flex-col",children:[t.jsx("p",{className:"text-3xl font-montserrat text-gray-500",children:"Your cart is empty ;("}),t.jsx(x,{label:"Shop Now",square:!0,onClick:()=>{i("/products")}})]}):t.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsx("p",{className:"text-coral-red text-2xl font-semibold text-left font-montserrat",children:"Shopping Cart"}),t.jsx("div",{className:"flex justify-end mb-4",children:t.jsx(x,{square:!0,label:"Checkout",onClick:()=>{i("/checkout")}})}),t.jsx("section",{children:c.map((r,s)=>t.jsx(S,{name:r.product.name,price:r.product.price,imgURLs:r.product.imgURLs,quantity:r.quantity,productId:r.product._id},s))}),t.jsxs("div",{className:"flex justify-end mt-4",children:[t.jsx("p",{className:"text-black text-3xl font-semibold text-left font-Palanquin mr-4 ",children:"Subtotal: "}),t.jsx("p",{className:"text-black text-xl mt-2 font-semibold text-left font-Palanquin ",children:"₹"}),t.jsxs("p",{className:"text-black text-3xl font-semibold text-left font-Palanquin",children:[" ",o.toFixed(2)]})]})]})}),t.jsx("section",{className:"padding-x padding-t pt- pb-8 bg-black",children:t.jsx(q,{})})]})}export{V as default};
