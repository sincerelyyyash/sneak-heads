import{i as l,j as p,k as g}from"./Nav-CkdNGOcW.js";var m="https://js.stripe.com/v3",y=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,v="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",E=function(){for(var r=document.querySelectorAll('script[src^="'.concat(m,'"]')),e=0;e<r.length;e++){var t=r[e];if(y.test(t.src))return t}return null},w=function(r){var e=r&&!r.advancedFraudSignals?"?advancedFraudSignals=false":"",t=document.createElement("script");t.src="".concat(m).concat(e);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(t),t},L=function(r,e){!r||!r._registerWrapper||r._registerWrapper({name:"stripe-js",version:"3.3.0",startTime:e})},i=null,c=null,u=null,P=function(r){return function(){r(new Error("Failed to load Stripe.js"))}},j=function(r,e){return function(){window.Stripe?r(window.Stripe):e(new Error("Stripe.js not available"))}},b=function(r){return i!==null?i:(i=new Promise(function(e,t){if(typeof window>"u"||typeof document>"u"){e(null);return}if(window.Stripe&&r&&console.warn(v),window.Stripe){e(window.Stripe);return}try{var n=E();if(n&&r)console.warn(v);else if(!n)n=w(r);else if(n&&u!==null&&c!==null){var a;n.removeEventListener("load",u),n.removeEventListener("error",c),(a=n.parentNode)===null||a===void 0||a.removeChild(n),n=w(r)}u=j(e,t),c=P(t),n.addEventListener("load",u),n.addEventListener("error",c)}catch(f){t(f);return}}),i.catch(function(e){return i=null,Promise.reject(e)}))},C=function(r,e,t){if(r===null)return null;var n=r.apply(void 0,e);return L(n,t),n},s,h=!1,S=function(){return s||(s=b(null).catch(function(r){return s=null,Promise.reject(r)}),s)};Promise.resolve().then(function(){return S()}).catch(function(o){h||console.warn(o)});var x=function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];h=!0;var n=Date.now();return S().then(function(a){return C(a,e,n)})};const I=async o=>{try{return(await l.post(`${p}/order/cancel-order`,{orderId:o},{withCredentials:!0})).data}catch(r){throw r}},R=async()=>{try{return(await l.get(`${p}/order/all-orders`,{withCredentials:!0})).data}catch(o){throw o}},T=async(o,r)=>{const e=await x(g);try{const t=r.map(d=>({price_data:{currency:"inr",product_data:{name:d.product.name},unit_amount:d.subtotal*100},quantity:d.quantity})),a=(await l.post(`${p}/order/create-checkout-session`,{shippingInfo:o,lineItems:t},{withCredentials:!0})).data.message.id;if((await e.redirectToCheckout({sessionId:a})).error)throw new Error("Redirect to checkout failed")}catch(t){throw t}};export{I as c,R as g,T as m};
