import{r as a,a as C,j as e,R as f}from"./index-CWt01uhK.js";import{u as y,g as F,e as P,N as k,F as S}from"./Nav-CkdNGOcW.js";import{f as A,b as E}from"./CartsApi-B0BkaZ2i.js";import{m as I}from"./OrdersApi-CAQt-M-D.js";function R({userName:i,userEmail:l}){const[o,j]=a.useState(""),[n,m]=a.useState(""),[u,p]=a.useState(""),[c,g]=a.useState(""),[t,x]=a.useState(""),[N,v]=a.useState(""),[_,b]=C(y),[s,O]=a.useState({address:"",city:"",state:"",country:"",pincode:"",phoneNumber:""}),d=w=>{const{name:q,value:r}=w.target;let h=r;switch(q){case"address":j(r);break;case"city":m(r);break;case"state":p(r);break;case"country":g(r);break;case"pincode":h=r.replace(/\D/g,"").slice(0,6),x(h);break;case"phoneNumber":h=r.replace(/\D/g,"").slice(0,10),v(h);break}};return a.useEffect(()=>{b({address:o,city:n,state:u,country:c,pincode:t,phoneNumber:N})},[o,n,u,c,t,N,b]),e.jsx("div",{className:"w-full p-5 shadow-lg lg:max-w-lg mt-10 rounded-lg bg-white",children:e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex flex-col px-10 py-10 m-4",children:[e.jsx("h3",{className:"flex justify-center text-coral-red text-3xl font-palanquin",children:"Billing Info"}),e.jsx("div",{children:e.jsxs("p",{className:"text-lg font-palanquin",children:["Name: ",i]})}),e.jsx("div",{children:e.jsxs("p",{className:"text-lg font-palanquin",children:["Email address: ",l]})}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"text-lg font-montserrat text-gray-500",htmlFor:"address",children:"Address:"}),e.jsx("input",{type:"text",name:"address",id:"address",value:o,onChange:d,className:"w-full border border-gray-300 h-10 mt-3 rounded-lg p-2"}),s.address&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.address})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"text-lg font-montserrat text-gray-500",htmlFor:"city",children:"City:"}),e.jsx("input",{type:"text",name:"city",id:"city",value:n,onChange:d,className:"w-full border border-gray-300 h-10 mt-3 rounded-lg p-2"}),s.city&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.city})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"text-lg font-montserrat text-gray-500",htmlFor:"state",children:"State:"}),e.jsx("input",{type:"text",name:"state",id:"state",value:u,onChange:d,className:"w-full border border-gray-300 h-10 mt-3 rounded-lg p-2"}),s.state&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.state})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"text-lg font-montserrat text-gray-500",htmlFor:"country",children:"Country:"}),e.jsx("input",{type:"text",name:"country",id:"country",value:c,onChange:d,className:"w-full border border-gray-300 h-10 mt-3 rounded-lg p-2"}),s.country&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.country})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"text-lg font-montserrat text-gray-500",htmlFor:"pincode",children:"Pincode:"}),e.jsx("input",{type:"text",name:"pincode",id:"pincode",value:t,onChange:d,className:"w-full border border-gray-300 h-10 mt-3 rounded-lg p-2"}),s.pincode&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.pincode})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"text-lg font-montserrat text-gray-500",htmlFor:"phoneNumber",children:"Phone Number:"}),e.jsx("input",{type:"text",name:"phoneNumber",id:"phoneNumber",value:N,onChange:d,className:"w-full border border-gray-300 h-10 mt-3 rounded-lg p-2"}),s.phoneNumber&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.phoneNumber})]})]})})})}function D(){const{getAllProductsFromCart:i}=A();a.useEffect(()=>{i()},[]);const l=f(E),o=f(y),j=async()=>{try{await I(o,l)}catch(t){throw t}};if(!Array.isArray(l))return e.jsx("div",{className:"w-full p-5 shadow-lg lg:max-w-lg mt-10 rounded-lg bg-white",children:e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex flex-col px-10 py-10 m-4",children:[e.jsx("h3",{className:"flex justify-center text-coral-red text-3xl font-palanquin",children:"Your Order"}),e.jsx("p",{className:"text-lg font-palanquin",children:"No items in the cart."})]})})});const n=l.map(t=>({...t.product,quantity:t.quantity,totalPrice:t.product.price*t.quantity})),m=n.reduce((t,x)=>t+x.totalPrice,0),p=m*.1,c=49,g=m+p+c;return e.jsx("div",{className:"w-full p-5 shadow-lg lg:max-w-lg mt-10 rounded-lg bg-white",children:e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex flex-col px-10 py-10 m-4",children:[e.jsx("h3",{className:"flex justify-center text-coral-red text-3xl font-palanquin",children:"Your Order"}),e.jsxs("div",{className:"flex justify-between items-center mt-2 p-2 border-b border-gray-300",children:[e.jsx("p",{className:"text-lg font-palanquin font-semibold",children:"Products"}),e.jsx("p",{className:"text-lg font-palanquin font-semibold",children:"Price"})]}),n.map((t,x)=>e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("p",{className:"text-lg font-palanquin",children:[t.name," x ",t.quantity]}),e.jsxs("p",{className:"text-lg font-palanquin",children:["₹",t.totalPrice.toFixed(2)]})]},x)),e.jsxs("div",{className:"flex justify-between items-center mt-4 border-t border-gray-300",children:[e.jsx("p",{className:"text-lg font-palanquin font-semibold",children:"Subtotal:"}),e.jsxs("p",{className:"text-lg font-palanquin",children:["₹",m.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("p",{className:"text-lg font-palanquin font-semibold",children:"Tax:"}),e.jsxs("p",{className:"text-lg font-palanquin",children:["₹",p.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("p",{className:"text-lg font-palanquin font-semibold",children:"Shipping Fee:"}),e.jsxs("p",{className:"text-lg font-palanquin",children:["₹",c.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx("p",{className:"text-lg font-palanquin font-semibold",children:"Total:"}),e.jsxs("p",{className:"text-lg font-palanquin",children:["₹",g.toFixed(2)]})]}),e.jsx("button",{onClick:j,className:`mt-5 bg-white text-coral-red border border-coral-red hover:text-white 
              hover:bg-coral-red font-bold text-xl h-12 rounded-lg w-full sm:w-auto`,children:"Proceed to pay"})]})})})}function U(){const i=f(F),l=f(P);return e.jsxs("div",{children:[e.jsx(k,{}),e.jsx("div",{className:"py-20 pt-40",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("p",{className:"text-coral-red text-3xl font-semibold text-left font-montserrat",children:"Checkout"}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between",children:[e.jsx("div",{className:"sm:w-1/2",children:e.jsx(R,{userEmail:l,userName:i})}),e.jsx("div",{className:"sm:w-1/2 mt-8 sm:mt-0",children:e.jsx(D,{})})]})]})}),e.jsx("section",{className:"padding-x padding-t pt- pb-8 bg-black",children:e.jsx(S,{})})]})}export{U as default};
