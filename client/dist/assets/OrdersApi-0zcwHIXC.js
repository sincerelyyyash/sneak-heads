import{i as l,j as p,k as S}from"./Nav-zLt7MVQS.js";var w="https://js.stripe.com/v3",y=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,f="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",g=function(){for(var r=document.querySelectorAll('script[src^="'.concat(w,'"]')),e=0;e<r.length;e++){var o=r[e];if(y.test(o.src))return o}return null},v=function(r){var e=r&&!r.advancedFraudSignals?"?advancedFraudSignals=false":"",o=document.createElement("script");o.src="".concat(w).concat(e);var t=document.head||document.body;if(!t)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return t.appendChild(o),o},E=function(r,e){!r||!r._registerWrapper||r._registerWrapper({name:"stripe-js",version:"3.3.0",startTime:e})},s=null,u=null,d=null,L=function(r){return function(){r(new Error("Failed to load Stripe.js"))}},P=function(r,e){return function(){window.Stripe?r(window.Stripe):e(new Error("Stripe.js not available"))}},j=function(r){return s!==null?s:(s=new Promise(function(e,o){if(typeof window>"u"||typeof document>"u"){e(null);return}if(window.Stripe&&r&&console.warn(f),window.Stripe){e(window.Stripe);return}try{var t=g();if(t&&r)console.warn(f);else if(!t)t=v(r);else if(t&&d!==null&&u!==null){var a;t.removeEventListener("load",d),t.removeEventListener("error",u),(a=t.parentNode)===null||a===void 0||a.removeChild(t),t=v(r)}d=P(e,o),u=L(o),t.addEventListener("load",d),t.addEventListener("error",u)}catch(i){o(i);return}}),s.catch(function(e){return s=null,Promise.reject(e)}))},b=function(r,e,o){if(r===null)return null;var t=r.apply(void 0,e);return E(t,o),t},c,h=!1,m=function(){return c||(c=j(null).catch(function(r){return c=null,Promise.reject(r)}),c)};Promise.resolve().then(function(){return m()}).catch(function(n){h||console.warn(n)});var C=function(){for(var r=arguments.length,e=new Array(r),o=0;o<r;o++)e[o]=arguments[o];h=!0;var t=Date.now();return m().then(function(a){return b(a,e,t)})};const q=async n=>{try{return(await l.post(`${p}/order/new-order`,n,{withCredentials:!0})).data}catch(r){throw r}},I=async n=>{try{return(await l.post(`${p}/order/cancel-order`,{orderId:n},{withCredentials:!0})).data}catch(r){throw r}},O=async()=>{try{return(await l.get(`${p}/order/all-orders`,{withCredentials:!0})).data}catch(n){throw n}},R=async n=>{const r=await C(S);try{const e=n.map(i=>({price_data:{currency:"inr",product_data:{name:i.product.name},unit_amount:i.subtotal*100},quantity:i.quantity})),t=(await l.post(`${p}/order/create-checkout-session`,{lineItems:e},{withCredentials:!0})).data.message.id;if((await r.redirectToCheckout({sessionId:t})).error)throw new Error("Redirect to checkout failed")}catch(e){throw e}};export{I as c,O as g,R as m,q as n};
